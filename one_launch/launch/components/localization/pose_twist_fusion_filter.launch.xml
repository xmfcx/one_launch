<?xml version="1.0"?>
<launch>

  <node pkg="ekf_localizer" exec="ekf_localizer" name="ekf_localizer" output="screen">
    <remap from="initialpose" to="/initialpose3d"/>
    <remap from="in_pose_with_covariance" to="/localization/pose_estimator/pose_with_covariance"/>
    <remap from="in_twist_with_covariance" to="/localization/twist_estimator/twist_with_covariance"/>
    <remap from="ekf_odom" to="kinematic_state"/>
    <remap from="ekf_pose" to="pose"/>
    <remap from="ekf_pose_with_covariance" to="/localization/pose_with_covariance"/>
    <remap from="ekf_biased_pose" to="biased_pose"/>
    <remap from="ekf_biased_pose_with_covariance" to="biased_pose_with_covariance"/>
    <remap from="ekf_twist" to="twist"/>
    <remap from="ekf_twist_with_covariance" to="twist_with_covariance"/>
    <remap from="trigger_node_srv" to="trigger_node"/>
    <param name="pose_frame_id" value="map"/>
    <param from="$(find-pkg-share one_launch)/config/components/localization/ekf_localizer.param.yaml"/>
  </node>

  <node pkg="stop_filter" exec="stop_filter" name="stop_filter" output="screen">
    <param name="vx_threshold" value="0.01"/>
    <param name="wz_threshold" value="0.01"/>
    <remap from="input/odom" to="/localization/pose_twist_fusion_filter/kinematic_state"/>
    <remap from="output/odom" to="/localization/kinematic_state"/>
    <remap from="debug/stop_flag" to="debug/stop_flag"/>
  </node>

  <node pkg="twist2accel" exec="twist2accel" name="twist2accel" output="screen">
    <remap from="input/odom" to="/localization/kinematic_state"/>
    <remap from="input/twist" to="/localization/twist_estimator/twist_with_covariance"/>
    <remap from="output/accel" to="/localization/acceleration"/>
    <param name="accel_lowpass_gain" value="0.9"/>
    <param name="use_odom" value="true"/>
  </node>

</launch>
